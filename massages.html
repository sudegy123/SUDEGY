<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>الرسائل - Sudegy</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="style.css"> <!-- تأكد أن style.css موجود في نفس المسار -->
  <style>
    .scrollbar::-webkit-scrollbar { width:6px; }
    .scrollbar::-webkit-scrollbar-thumb { background:#e5e7eb; border-radius:999px; }
  </style>
</head>
<body class="bg-[#fff7f0]">

  <!-- الهيدر سيتم تضمينه -->
  <div data-include="header.html"></div>

  <main class="max-w-7xl mx-auto px-4 py-6">
    <h1 class="text-2xl font-bold mb-4 text-gray-900">الرسائل</h1>

    <div class="grid gap-4 md:grid-cols-3">
      <!-- قائمة المحادثات -->
      <aside class="bg-white rounded-2xl shadow-sm border p-3 h-[70vh]">
        <input type="text" placeholder="ابحث..." class="w-full mb-3 rounded-full border px-3 py-2">
        <div id="chatList" class="overflow-auto h-[60vh] scrollbar">
          <!-- عناصر المحادثات توضع هنا -->
        </div>
      </aside>

      <!-- نافذة المحادثة -->
      <section class="bg-white rounded-2xl shadow-sm border p-3 md:col-span-2 flex flex-col h-[70vh]">
        <header class="border-b pb-3 mb-3 flex items-center justify-between">
          <div>
            <div id="chatName" class="font-bold">— اختر محادثة</div>
            <div id="chatStatus" class="text-xs text-gray-500">غير متصل</div>
          </div>
        </header>

        <div id="messages" class="flex-1 overflow-auto p-3 scrollbar bg-orange-50/40 rounded-xl"></div>

        <form id="sendForm" class="mt-3 flex gap-2">
          <input id="msgInput" type="text" placeholder="اكتب رسالتك..." class="flex-1 rounded-full border px-4 py-2">
          <button type="submit" class="bg-orange-500 text-white px-4 py-2 rounded-full">إرسال</button>
        </form>
      </section>
    </div>
  </main>

  <div data-include="footer.html"></div>

  <script src="include-html.js"></script> <!-- تأكد أنه موجود -->
  <script>
    // مثال تهيئة سريع لتجربة الواجهة محلياً
    const chatList = document.getElementById('chatList');
    const messages = document.getElementById('messages');

    const sample = [
      {name: 'شركة زاد', last:'نحتاج عرض سعر', time:'10:15 ص', status:'online'},
      {name: 'مؤسسة النيل', last:'تم إرسال المستند', time:'أمس', status:'offline'}
    ];

    sample.forEach(c => {
      const el = document.createElement('div');
      el.className = 'p-3 flex items-center gap-3 hover:bg-orange-50 rounded-xl cursor-pointer';
      el.innerHTML = `<div class="flex-1"><div class="font-semibold">${c.name}</div><div class="text-xs text-gray-500">${c.last}</div></div><div class="text-xs text-gray-400">${c.time}</div>`;
      el.addEventListener('click', ()=> {
        document.getElementById('chatName').innerText = c.name;
        document.getElementById('chatStatus').innerText = c.status === 'online' ? 'متصل الآن' : 'غير متصل';
        messages.innerHTML = `<div class="self-start max-w-[75%]"><div class="bg-white p-3 rounded">${c.last}</div></div>`;
      });
      chatList.appendChild(el);
    });

    document.getElementById('sendForm').addEventListener('submit', e=> {
      e.preventDefault();
      const v = document.getElementById('msgInput').value.trim();
      if(!v) return;
      messages.innerHTML += `<div class="self-end max-w-[75%]"><div class="bg-orange-500 text-white p-3 rounded">${v}</div></div>`;
      document.getElementById('msgInput').value = '';
      messages.scrollTop = messages.scrollHeight;
    });
  </script>

</body>
</html>
